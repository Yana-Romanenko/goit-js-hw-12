{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.picture-search-name');\nconst loader = document.querySelector('.loader-container');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-button');\n\n\n let lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt',\n        close: true,\n      });\n\nconst API_KEY = '41764451-f0ee5e8d00846e21c9f97a054';\n\nlet currentPage = 1;\nlet currentQuery = \"\"; \nlet totalHits = 0;\nlet per_page = 40;\n\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  loadMoreBtn.style.display = \"none\";\n  currentPage = 1;\n  gallery.innerHTML = \"\";\n      \n\n  currentQuery = searchInput.value.trim();\n  if (!currentQuery) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Please, enter something!',\n      position: 'topRight',\n    });\n    return;\n  }\n  showLoader();\n  loader.textContent = \"Loading images, please wait...\";\n\n      \n  try {\n    const { data: { hits, totalHits } } = await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: API_KEY,\n        q: currentQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: currentPage,\n        per_page: 40,\n      }\n    });\n    hideLoader();\n     \n    if (hits.length === 0) {\n      iziToast.info({\n        title: \"Info\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"topRight\",\n      });\n      return;\n    }\n    updateGallery(hits);\n    lightbox.refresh();\n    loadMoreBtn.style.display = \"block\";\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: \"Error\",\n      message: \"An error occurred while fetching data. Please try again later.\",\n      position: \"topRight\",\n    });\n  } finally {\n    loader.textContent = \"\";\n    hideLoader();\n  };\n\n\n  if (currentPage === Math.ceil(totalHits / per_page)) {\n    loadMoreBtn.style.display = \"none\";\n   iziToast.info({\n    title: \"Info\",\n    message: \"We're sorry, but you've reached the end of search results\",\n    position: \"topRight\",\n  });\n}\n});\n\n\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  loader.textContent = \"Loading images, please wait...\";\n  showLoader();\n\n \n  try {\n  \n  const {data: {hits, totalHits}} = await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: API_KEY,\n        q: currentQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: currentPage,\n        per_page: 40,\n      },\n  });\n  hideLoader();\n    updateGallery(hits);\n    lightbox.refresh();\n  \n    const cardHeight = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect().height;\n    \n    console.log(document.querySelector('.gallery-item'));\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n  }  catch (error) {\n  iziToast.error({\n    title: \"Error\",\n    message: \"An error occurred while fetching data. Please try again later.\",\n    position: \"topRight\",\n  });\n} finally {\n  loader.textContent = \"\";\n  hideLoader(); \n  }\n  \n\n  if (currentPage === Math.ceil(totalHits / per_page)) {\n    loadMoreBtn.style.display = \"none\";\n   iziToast.info({\n    title: \"Info\",\n    message: \"We're sorry, but you've reached the end of search results\",\n    position: \"topRight\",\n  });\n}\n  });\n\n \n\nfunction updateGallery(images) {\n  const galleryMarkup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n<li class=\"gallery-item\">\n     <a href=\"${largeImageURL}\">\n     <img src=\"${webformatURL}\" alt=\"${tags}\">\n     </a>\n      <div class=\"image-info\">\n          <p>Likes:${likes}</p>\n          <p>Views: ${views}</p>\n          <p>Comments: ${comments}</p>\n  <p>Downloads: ${downloads}</p>\n      </div>\n    </li>`).join('');\n  gallery.insertAdjacentHTML('beforeend', galleryMarkup); \n}\n\n\n"],"names":["searchForm","searchInput","loader","gallery","loadMoreBtn","lightbox","SimpleLightbox","API_KEY","currentPage","currentQuery","totalHits","per_page","showLoader","hideLoader","event","iziToast","hits","axios","updateGallery","error","cardHeight","images","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"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"}